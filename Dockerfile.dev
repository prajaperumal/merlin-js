# Development Dockerfile with hot reload support

FROM node:20-alpine AS base

WORKDIR /app

# Copy package files
COPY package*.json ./
COPY server/package*.json ./server/
COPY client/package*.json ./client/

# Install all dependencies (including dev dependencies)
RUN npm ci

# Server development stage
FROM base AS server-dev

# Copy server code
COPY server ./server

# Generate Prisma Client
WORKDIR /app/server
RUN npx prisma generate

WORKDIR /app

# Client development stage
FROM base AS client-dev

# Copy client code
COPY client ./client

WORKDIR /app
